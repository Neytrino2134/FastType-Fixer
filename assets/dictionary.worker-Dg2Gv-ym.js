(function(){"use strict";const l=new Set,o=new Set,d=n=>n.toLowerCase().replace(/[^a-zA-Zа-яА-ЯёЁ0-9]/g,"").trim(),C=n=>{const t=d(n);return!!(!t||!isNaN(Number(t))||l.size>0&&l.has(t)||o.size>0&&o.has(t))};self.onmessage=n=>{const{type:t,text:h,language:L,processedLength:s,words:u}=n.data;if(t==="SET_DICTIONARY"){const c=L==="ru"?l:o;c.clear(),Array.isArray(u)&&u.forEach(r=>c.add(r));return}if(t==="CHECK_TEXT"){if(!h){self.postMessage({type:"CHECK_RESULT",validatedLength:s,checkedLength:s});return}const r=h.slice(s).split(/([ \n\t.,!?;:()""''«»—]+)/);let g=0,a=0,f=!1;for(let i=0;i<r.length;i++){const e=r[i];if(e.length===0)continue;const p=/^[ \n\t.,!?;:()""''«»—]+$/.test(e),E=i===r.length-1;if(p)a+=e.length,f||(g+=e.length);else{if(E)break;C(e)?(a+=e.length,f||(g+=e.length)):(a+=e.length,f=!0)}}self.postMessage({type:"CHECK_RESULT",validatedLength:s+g,checkedLength:s+a})}}})();
