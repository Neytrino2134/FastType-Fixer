(function(){"use strict";const o=new Set,i=new Set,a=t=>t.toLowerCase().replace(/[^a-zA-Zа-яА-ЯёЁ0-9]/g,"").trim(),l=t=>{const e=a(t);return!!(!e||!isNaN(Number(e))||o.size>0&&o.has(e)||i.size>0&&i.has(e))};self.onmessage=t=>{const{type:e,text:c,language:u,words:f}=t.data;if(e==="SET_DICTIONARY"){const n=u==="ru"?o:i;n.clear(),Array.isArray(f)&&f.forEach(s=>n.add(s)),console.log(`[Worker] Dictionary ${u} loaded with ${n.size} words.`);return}if(e==="CHECK_CHUNK"){if(!c){self.postMessage({type:"CHECK_RESULT",unknownWords:[]});return}const n=c.split(/([ \n\t.,!?;:()""''«»—\-\/_+]+)/),s=[];for(const r of n)r.trim()&&(/^[ \n\t.,!?;:()""''«»—\-\/_+]+$/.test(r)||r.length<=3||l(r)||s.push(a(r)));self.postMessage({type:"CHECK_RESULT",unknownWords:s})}}})();
